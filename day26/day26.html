<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /*

        synchronous and asynchronous
        event loop mechanism

        callback hell- pyramid of doom
        to overcome callback hell we will use - promises and async await        
        

        promises
        A Promise in JavaScript represents the eventual 
        completion (or failure) of an asynchronous operation 

        promise have three states
        1. success - fullfilled- resolved
        2. failure- rejected 
        3. pending



        creating a promise
        let a=new Promise((res,rej)=>{
        let data=10;
        if(data==10){
        res("success")
        }else{
        rej("failure ")
        }

        consume a promise
        1. then catch method
        2. async await

        
        })


        */

        // let a=new Promise((res,rej)=>{
        //     let data=10;
        //     if(data==10){
        //         res("success")
        //     }else{
        //         rej("failure ")
        //     }

        // })

        // //consuming a promise
        // console.log(a)

        // a.then((b)=>{
        // console.log(b)
        // })
        // .catch((e)=>{
        //     console.log(e)
        // })

        function sum(val) {
            return new Promise((res) => {
                res(val + 10)
            })
        }

        function sub(val) {
            return new Promise((res) => {
                res(val - 5)
            })
        }

        function mul(val) {
            return new Promise((res) => {
                res(val * 2)
            })
        }

        function div(val) {
            return new Promise((res) => {
                res(val / 2)
            })
        }

        // sum(10)
        // .then((addres)=>sub(addres))
        // .then((subres)=>mul(subres))
        // .then((mulres)=>div(mulres))
        // .then((finalres)=>console.log(finalres))

        let a = new Promise((res) => {
            setTimeout(() => {
                res("first")
            }, 2000)
        })



        let b = new Promise((res) => {
            setTimeout(() => {
                res("second")
            }, 8000)

        })


        let c = new Promise((res) => {
            setTimeout(() => {
                res("third")
            }, 1000)
        })

        // a.then((res) => console.log(res))
        // b.then((res) => console.log(res))
        // c.then((res) => console.log(res))


        a.then((res)=>{
            console.log(res)
            return b
        })
        .then((res)=>{
            console.log(res)
            return c
        })
        .then((res)=>{
            console.log(res)
        })

        Promise.all([a,b,c])
        .then((res)=>console.log(res[0]))

        










    </script>
</body>

</html>